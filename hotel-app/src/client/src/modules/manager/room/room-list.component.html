<div class="hotel-service p-4">
  <div class="card border-2 border-slate-200 rounded-md">
    <div class="card-header">
      <h1 class="text-2xl text-center font-medium border-b-2 p-2">
        Room Service Management
      </h1>
    </div>
    <form [formGroup]="searchForm" (ngSubmit)="onSubmit()">
      <div class="card-body border-b-2 p-2">
        <div class="form-group">
          <label for="keyword" class="block mb-1">Search by number</label>
          <input
            type="text"
            id="keyword"
            placeholder="Enter keyword"
            class="w-full p-1 border-2 rounded-md focus:outline-slate-500"
            formControlName="keyword"
          />
          <span
            *ngIf="
              searchForm.get('keyword')?.invalid &&
              searchForm.get('keyword')?.touched
            "
            class="text-red-500 ml-2 font-medium"
          >
            Keyword is required
          </span>
        </div>
      </div>
      <div class="card-footer flex justify-between p-2">
        <button
          type="button"
          (click)="onCreate()"
          class="p-2 bg-green-500 text-white rounded-full"
        >
          <fa-icon [icon]="faPlus" class="mr-1"></fa-icon>Create
        </button>
        <button type="submit" class="p-2 bg-blue-500 text-white rounded-full">
          <fa-icon [icon]="faSearch" class="mr-1"></fa-icon>Search
        </button>
      </div>
    </form>
  </div>
  <!-- list -->
  <div class="list mt-4">
    <table class="w-full border-collapse rounded-md text-center">
      <thead>
        <tr class="*:border-2 p-2">
          <th>No</th>
          <th>Number</th>
          <th>Type</th>
          <th>Capacity</th>
          <th>Price</th>
          <th>Active</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let item of dataApi; let i = index"
          class="*:border-2 *:p-2"
        >
          <td>{{ i + 1 }}</td>
          <td>{{ item.number }}</td>
          <td>{{ item.type }}</td>
          <td>{{ item.capacity }}</td>
          <td>{{ item.price | currency }}</td>
          <td>{{ item.active }}</td>
          <td>
            <div class="action flex gap-3 justify-center">
              <button type="submit" title="Edit" (click)="onEdit(item.id)">
                <fa-icon [icon]="faEdit" class="text-green-500"></fa-icon>
              </button>
              <button type="submit" title="Delete" (click)="onDelete(item.id)">
                <fa-icon [icon]="faTrash" class="text-red-500"></fa-icon>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="pagination flex justify-between items-center border-b-2 py-2">
      <!-- Page Size  -->
      <div class="page-size">
        <label for="pageSize">Page Size</label>
        <select
          (change)="onChangeSize($event)"
          id="pageSize"
          class="border-2 cursor-pointer ml-1 p-1 rounded-md"
        >
          <option *ngFor="let size of pageSizes" [value]="size">
            {{ size }}
          </option>
        </select>
      </div>
      <!-- Page item -->
      <div class="page-item">
        <ul class="page-list flex gap-2">
          <li class="page-item">
            <button
              title="Page Item"
              [ngClass]="{
                'pointer-events-none bg-blue-500 text-white': currentPage == 0
              }"
              (click)="onChangePageNumber(0)"
              class="border border-slate-400 px-2 rounded-full hover:bg-blue-500 hover:text-white"
            >
              <fa-icon [icon]="faAngleDoubleLeft"></fa-icon>
            </button>
          </li>
          <li class="page-item">
            <button
              title="Page Item"
              [ngClass]="{
                'pointer-events-none bg-blue-500 text-white': currentPage == 0
              }"
              class="border border-slate-400 px-2 rounded-full hover:bg-blue-500 hover:text-white"
              (click)="onChangePageNumber(currentPage - 1)"
            >
              <fa-icon [icon]="faAngleLeft"></fa-icon>
            </button>
          </li>
          <li class="page-item" *ngFor="let item of getPageList()">
            <button
              title="Page Item"
              [ngClass]="{ 'bg-blue-500 text-white': currentPage == item }"
              class="border border-slate-400 px-2 rounded-full hover:bg-blue-500 hover:text-white"
              (click)="onChangePageNumber(item)"
            >
              {{ item + 1 }}
            </button>
          </li>
          <li class="page-item">
            <button
              title="Page Item"
              [ngClass]="{
                'bg-blue-500 text-white pointer-events-none':
                  currentPage == totalPages - 1
              }"
              class="border border-slate-400 px-2 rounded-full hover:bg-blue-500 hover:text-white"
              (click)="onChangePageNumber(currentPage + 1)"
            >
              <fa-icon [icon]="faAngleRight"></fa-icon>
            </button>
          </li>
          <li class="page-item">
            <button
              title="Page Item"
              [ngClass]="{
                'bg-blue-500 text-white pointer-events-none':
                  currentPage == totalPages - 1
              }"
              class="border border-slate-400 px-2 rounded-full hover:bg-blue-500 hover:text-white"
              (click)="onChangePageNumber(totalPages - 1)"
            >
              <fa-icon [icon]="faAngleDoubleRight"></fa-icon>
            </button>
          </li>
        </ul>
      </div>
      <!-- Page detail -->
      <div class="page-detail">
        <span>{{ pageSize * pageNumber + 1 }} - </span>
        <span
          >{{
            (pageNumber + 1) * pageSize > totalElements
              ? totalElements
              : (pageNumber + 1) * pageSize
          }}
          of
        </span>
        <span>{{ totalElements }}</span>
      </div>
    </div>
  </div>
  <!-- details -->
  <div class="details mt-4">
    <app-room-details
      *ngIf="isShow"
      (cancel)="onCancel()"
      (reSearch)="reSearch()"
      [editSelectItem]="editSelect"
      [isEdit]="isEdit"
      [dataApi]="dataApi"
    ></app-room-details>
  </div>
</div>
